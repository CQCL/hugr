---
source: hugr-llvm/src/extension/collections/borrow_array.rs
expression: mod_str
---
; ModuleID = 'test_context'
source_filename = "test_context"

@0 = private unnamed_addr constant [34 x i8] c"Array element is already borrowed\00", align 1
@prelude.panic_template = private unnamed_addr constant [34 x i8] c"Program panicked (signal %i): %s\0A\00", align 1
@1 = private unnamed_addr constant [37 x i8] c"Expected variant 1 but got variant 0\00", align 1
@prelude.panic_template.1 = private unnamed_addr constant [34 x i8] c"Program panicked (signal %i): %s\0A\00", align 1
@2 = private unnamed_addr constant [37 x i8] c"Expected variant 1 but got variant 0\00", align 1
@prelude.panic_template.2 = private unnamed_addr constant [34 x i8] c"Program panicked (signal %i): %s\0A\00", align 1
@3 = private unnamed_addr constant [37 x i8] c"Expected variant 1 but got variant 0\00", align 1
@prelude.panic_template.3 = private unnamed_addr constant [34 x i8] c"Program panicked (signal %i): %s\0A\00", align 1
@4 = private unnamed_addr constant [37 x i8] c"Expected variant 1 but got variant 0\00", align 1
@prelude.panic_template.4 = private unnamed_addr constant [34 x i8] c"Program panicked (signal %i): %s\0A\00", align 1
@5 = private unnamed_addr constant [37 x i8] c"Expected variant 1 but got variant 0\00", align 1
@prelude.panic_template.5 = private unnamed_addr constant [34 x i8] c"Program panicked (signal %i): %s\0A\00", align 1

define private void @_hl.main.1() {
alloca_block:
  %"12_0" = alloca i64, align 8
  %"10_0" = alloca i64, align 8
  %"15_0" = alloca { ptr, ptr, i64 }, align 8
  %"13_0" = alloca { ptr, ptr, i64 }, align 8
  %"14_0" = alloca i64, align 8
  %"14_1" = alloca i64, align 8
  %"8_0" = alloca i64, align 8
  %"18_0" = alloca { i1, { ptr, ptr, i64 } }, align 8
  %"0" = alloca { i1, { ptr, ptr, i64 } }, align 8
  %"19_0" = alloca { ptr, ptr, i64 }, align 8
  %"014" = alloca { ptr, ptr, i64 }, align 8
  %"016" = alloca { ptr, ptr, i64 }, align 8
  %"24_0" = alloca { i32, ptr }, align 8
  %"21_0" = alloca { ptr, ptr, i64 }, align 8
  %"25_0" = alloca { ptr, ptr, i64 }, align 8
  %"021" = alloca { ptr, ptr, i64 }, align 8
  %"27_0" = alloca { ptr, ptr, i64 }, align 8
  %"29_0" = alloca { i1, i64 }, align 8
  %"29_1" = alloca { ptr, ptr, i64 }, align 8
  %"029" = alloca { i1, i64 }, align 8
  %"1" = alloca { ptr, ptr, i64 }, align 8
  %"31_0" = alloca i64, align 8
  %"033" = alloca i64, align 8
  %"36_0" = alloca { i32, ptr }, align 8
  %"37_0" = alloca i64, align 8
  %"037" = alloca i64, align 8
  %"39_0" = alloca i64, align 8
  %"41_0" = alloca { i1, { ptr, ptr, i64 }, i64 }, align 8
  %"046" = alloca { i1, { ptr, ptr, i64 }, i64 }, align 8
  %"42_0" = alloca i64, align 8
  %"42_1" = alloca { ptr, ptr, i64 }, align 8
  %"049" = alloca i64, align 8
  %"150" = alloca { ptr, ptr, i64 }, align 8
  %"053" = alloca i64, align 8
  %"154" = alloca { ptr, ptr, i64 }, align 8
  %"47_0" = alloca { i32, ptr }, align 8
  %"44_0" = alloca i64, align 8
  %"44_1" = alloca { ptr, ptr, i64 }, align 8
  %"48_0" = alloca i64, align 8
  %"48_1" = alloca { ptr, ptr, i64 }, align 8
  %"062" = alloca i64, align 8
  %"163" = alloca { ptr, ptr, i64 }, align 8
  %"50_0" = alloca i64, align 8
  %"50_1" = alloca { ptr, ptr, i64 }, align 8
  %"52_0" = alloca { i1, { ptr, ptr, i64 }, i64 }, align 8
  %"53_0" = alloca i64, align 8
  %"53_1" = alloca { ptr, ptr, i64 }, align 8
  %"073" = alloca i64, align 8
  %"174" = alloca { ptr, ptr, i64 }, align 8
  %"58_0" = alloca { i32, ptr }, align 8
  %"59_0" = alloca i64, align 8
  %"59_1" = alloca { ptr, ptr, i64 }, align 8
  %"080" = alloca i64, align 8
  %"181" = alloca { ptr, ptr, i64 }, align 8
  %"61_0" = alloca i64, align 8
  %"61_1" = alloca { ptr, ptr, i64 }, align 8
  %"63_0" = alloca { i1, { ptr, ptr, i64 }, i64 }, align 8
  %"64_0" = alloca i64, align 8
  %"64_1" = alloca { ptr, ptr, i64 }, align 8
  %"091" = alloca i64, align 8
  %"192" = alloca { ptr, ptr, i64 }, align 8
  %"69_0" = alloca { i32, ptr }, align 8
  %"70_0" = alloca i64, align 8
  %"70_1" = alloca { ptr, ptr, i64 }, align 8
  %"098" = alloca i64, align 8
  %"199" = alloca { ptr, ptr, i64 }, align 8
  %"72_0" = alloca i64, align 8
  %"72_1" = alloca { ptr, ptr, i64 }, align 8
  br label %entry_block

entry_block:                                      ; preds = %alloca_block
  store i64 2, ptr %"12_0", align 4
  store i64 1, ptr %"10_0", align 4
  %"10_01" = load i64, ptr %"10_0", align 4
  %"12_02" = load i64, ptr %"12_0", align 4
  %0 = call ptr @malloc(i64 mul (i64 ptrtoint (ptr getelementptr (i64, ptr null, i32 1) to i64), i64 2))
  %1 = call ptr @malloc(i64 ptrtoint (ptr getelementptr (i64, ptr null, i32 1) to i64))
  call void @llvm.memset.p0.i64(ptr %1, i8 0, i64 ptrtoint (ptr getelementptr (i64, ptr null, i32 1) to i64), i1 false)
  %2 = insertvalue { ptr, ptr, i64 } poison, ptr %0, 0
  %3 = insertvalue { ptr, ptr, i64 } %2, ptr %1, 1
  %4 = insertvalue { ptr, ptr, i64 } %3, i64 0, 2
  %5 = getelementptr inbounds i64, ptr %0, i64 0
  store i64 %"10_01", ptr %5, align 4
  %6 = getelementptr inbounds i64, ptr %0, i64 1
  store i64 %"12_02", ptr %6, align 4
  store { ptr, ptr, i64 } %4, ptr %"15_0", align 8
  %"10_03" = load i64, ptr %"10_0", align 4
  %"12_04" = load i64, ptr %"12_0", align 4
  %7 = call ptr @malloc(i64 mul (i64 ptrtoint (ptr getelementptr (i64, ptr null, i32 1) to i64), i64 2))
  %8 = call ptr @malloc(i64 ptrtoint (ptr getelementptr (i64, ptr null, i32 1) to i64))
  call void @llvm.memset.p0.i64(ptr %8, i8 0, i64 ptrtoint (ptr getelementptr (i64, ptr null, i32 1) to i64), i1 false)
  %9 = insertvalue { ptr, ptr, i64 } poison, ptr %7, 0
  %10 = insertvalue { ptr, ptr, i64 } %9, ptr %8, 1
  %11 = insertvalue { ptr, ptr, i64 } %10, i64 0, 2
  %12 = getelementptr inbounds i64, ptr %7, i64 0
  store i64 %"10_03", ptr %12, align 4
  %13 = getelementptr inbounds i64, ptr %7, i64 1
  store i64 %"12_04", ptr %13, align 4
  store { ptr, ptr, i64 } %11, ptr %"13_0", align 8
  %"13_05" = load { ptr, ptr, i64 }, ptr %"13_0", align 8
  %array_ptr = extractvalue { ptr, ptr, i64 } %"13_05", 0
  %array_mask_ptr = extractvalue { ptr, ptr, i64 } %"13_05", 1
  %array_offset = extractvalue { ptr, ptr, i64 } %"13_05", 2
  %14 = add i64 %array_offset, 0
  call void @__barray_mask_check_not_borrowed(ptr %array_mask_ptr, i64 %14)
  %15 = getelementptr inbounds i64, ptr %array_ptr, i64 %14
  %16 = load i64, ptr %15, align 4
  %17 = add i64 %array_offset, 1
  call void @__barray_mask_check_not_borrowed(ptr %array_mask_ptr, i64 %17)
  %18 = getelementptr inbounds i64, ptr %array_ptr, i64 %17
  %19 = load i64, ptr %18, align 4
  store i64 %16, ptr %"14_0", align 4
  store i64 %19, ptr %"14_1", align 4
  store i64 0, ptr %"8_0", align 4
  %"15_06" = load { ptr, ptr, i64 }, ptr %"15_0", align 8
  %"8_07" = load i64, ptr %"8_0", align 4
  %"10_08" = load i64, ptr %"10_0", align 4
  %array_ptr9 = extractvalue { ptr, ptr, i64 } %"15_06", 0
  %array_mask_ptr10 = extractvalue { ptr, ptr, i64 } %"15_06", 1
  %array_offset11 = extractvalue { ptr, ptr, i64 } %"15_06", 2
  %20 = icmp ult i64 %"8_07", 2
  %21 = icmp ult i64 %"10_08", 2
  %22 = and i1 %20, %21
  br i1 %22, label %25, label %23

23:                                               ; preds = %entry_block
  %24 = insertvalue { i1, { ptr, ptr, i64 } } { i1 false, { ptr, ptr, i64 } poison }, { ptr, ptr, i64 } %"15_06", 1
  store { i1, { ptr, ptr, i64 } } %24, ptr %"0", align 8
  br label %33

25:                                               ; preds = %entry_block
  %26 = add i64 %"8_07", %array_offset11
  %27 = add i64 %"10_08", %array_offset11
  call void @__barray_mask_check_not_borrowed(ptr %array_mask_ptr10, i64 %26)
  call void @__barray_mask_check_not_borrowed(ptr %array_mask_ptr10, i64 %27)
  %28 = getelementptr inbounds i64, ptr %array_ptr9, i64 %26
  %29 = load i64, ptr %28, align 4
  %30 = getelementptr inbounds i64, ptr %array_ptr9, i64 %27
  %31 = load i64, ptr %30, align 4
  store i64 %31, ptr %28, align 4
  store i64 %29, ptr %30, align 4
  %32 = insertvalue { i1, { ptr, ptr, i64 } } { i1 true, { ptr, ptr, i64 } poison }, { ptr, ptr, i64 } %"15_06", 1
  store { i1, { ptr, ptr, i64 } } %32, ptr %"0", align 8
  br label %33

33:                                               ; preds = %23, %25
  %"012" = load { i1, { ptr, ptr, i64 } }, ptr %"0", align 8
  store { i1, { ptr, ptr, i64 } } %"012", ptr %"18_0", align 8
  %"18_013" = load { i1, { ptr, ptr, i64 } }, ptr %"18_0", align 8
  %34 = extractvalue { i1, { ptr, ptr, i64 } } %"18_013", 0
  switch i1 %34, label %35 [
    i1 true, label %37
  ]

35:                                               ; preds = %33
  %36 = extractvalue { i1, { ptr, ptr, i64 } } %"18_013", 1
  store { ptr, ptr, i64 } %36, ptr %"016", align 8
  br label %cond_19_case_0

37:                                               ; preds = %33
  %38 = extractvalue { i1, { ptr, ptr, i64 } } %"18_013", 1
  store { ptr, ptr, i64 } %38, ptr %"021", align 8
  br label %cond_19_case_1

cond_19_case_0:                                   ; preds = %35
  %"017" = load { ptr, ptr, i64 }, ptr %"016", align 8
  store { i32, ptr } { i32 1, ptr @1 }, ptr %"24_0", align 8
  store { ptr, ptr, i64 } %"017", ptr %"21_0", align 8
  %"24_018" = load { i32, ptr }, ptr %"24_0", align 8
  %"21_019" = load { ptr, ptr, i64 }, ptr %"21_0", align 8
  %39 = extractvalue { i32, ptr } %"24_018", 0
  %40 = extractvalue { i32, ptr } %"24_018", 1
  %41 = call i32 (ptr, ...) @printf(ptr @prelude.panic_template.1, i32 %39, ptr %40)
  call void @abort()
  store { ptr, ptr, i64 } zeroinitializer, ptr %"25_0", align 8
  %"25_020" = load { ptr, ptr, i64 }, ptr %"25_0", align 8
  store { ptr, ptr, i64 } %"25_020", ptr %"014", align 8
  br label %cond_exit_19

cond_19_case_1:                                   ; preds = %37
  %"022" = load { ptr, ptr, i64 }, ptr %"021", align 8
  store { ptr, ptr, i64 } %"022", ptr %"27_0", align 8
  %"27_023" = load { ptr, ptr, i64 }, ptr %"27_0", align 8
  store { ptr, ptr, i64 } %"27_023", ptr %"014", align 8
  br label %cond_exit_19

cond_exit_19:                                     ; preds = %cond_19_case_1, %cond_19_case_0
  %"015" = load { ptr, ptr, i64 }, ptr %"014", align 8
  store { ptr, ptr, i64 } %"015", ptr %"19_0", align 8
  %"19_024" = load { ptr, ptr, i64 }, ptr %"19_0", align 8
  %"8_025" = load i64, ptr %"8_0", align 4
  %array_ptr26 = extractvalue { ptr, ptr, i64 } %"19_024", 0
  %array_mask_ptr27 = extractvalue { ptr, ptr, i64 } %"19_024", 1
  %array_offset28 = extractvalue { ptr, ptr, i64 } %"19_024", 2
  %42 = icmp ult i64 %"8_025", 2
  br i1 %42, label %44, label %43

43:                                               ; preds = %cond_exit_19
  store { i1, i64 } { i1 false, i64 poison }, ptr %"029", align 4
  store { ptr, ptr, i64 } %"19_024", ptr %"1", align 8
  br label %49

44:                                               ; preds = %cond_exit_19
  %45 = add i64 %"8_025", %array_offset28
  call void @__barray_mask_check_not_borrowed(ptr %array_mask_ptr27, i64 %45)
  %46 = getelementptr inbounds i64, ptr %array_ptr26, i64 %45
  %47 = load i64, ptr %46, align 4
  %48 = insertvalue { i1, i64 } { i1 true, i64 poison }, i64 %47, 1
  store { i1, i64 } %48, ptr %"029", align 4
  store { ptr, ptr, i64 } %"19_024", ptr %"1", align 8
  br label %49

49:                                               ; preds = %43, %44
  %"030" = load { i1, i64 }, ptr %"029", align 4
  %"131" = load { ptr, ptr, i64 }, ptr %"1", align 8
  store { i1, i64 } %"030", ptr %"29_0", align 4
  store { ptr, ptr, i64 } %"131", ptr %"29_1", align 8
  %"29_032" = load { i1, i64 }, ptr %"29_0", align 4
  %50 = extractvalue { i1, i64 } %"29_032", 0
  switch i1 %50, label %51 [
    i1 true, label %52
  ]

51:                                               ; preds = %49
  br label %cond_31_case_0

52:                                               ; preds = %49
  %53 = extractvalue { i1, i64 } %"29_032", 1
  store i64 %53, ptr %"037", align 4
  br label %cond_31_case_1

cond_31_case_0:                                   ; preds = %51
  store { i32, ptr } { i32 1, ptr @2 }, ptr %"36_0", align 8
  %"36_035" = load { i32, ptr }, ptr %"36_0", align 8
  %54 = extractvalue { i32, ptr } %"36_035", 0
  %55 = extractvalue { i32, ptr } %"36_035", 1
  %56 = call i32 (ptr, ...) @printf(ptr @prelude.panic_template.2, i32 %54, ptr %55)
  call void @abort()
  store i64 0, ptr %"37_0", align 4
  %"37_036" = load i64, ptr %"37_0", align 4
  store i64 %"37_036", ptr %"033", align 4
  br label %cond_exit_31

cond_31_case_1:                                   ; preds = %52
  %"038" = load i64, ptr %"037", align 4
  store i64 %"038", ptr %"39_0", align 4
  %"39_039" = load i64, ptr %"39_0", align 4
  store i64 %"39_039", ptr %"033", align 4
  br label %cond_exit_31

cond_exit_31:                                     ; preds = %cond_31_case_1, %cond_31_case_0
  %"034" = load i64, ptr %"033", align 4
  store i64 %"034", ptr %"31_0", align 4
  %"29_140" = load { ptr, ptr, i64 }, ptr %"29_1", align 8
  %"10_041" = load i64, ptr %"10_0", align 4
  %"31_042" = load i64, ptr %"31_0", align 4
  %array_ptr43 = extractvalue { ptr, ptr, i64 } %"29_140", 0
  %array_mask_ptr44 = extractvalue { ptr, ptr, i64 } %"29_140", 1
  %array_offset45 = extractvalue { ptr, ptr, i64 } %"29_140", 2
  %57 = icmp ult i64 %"10_041", 2
  br i1 %57, label %61, label %58

58:                                               ; preds = %cond_exit_31
  %59 = insertvalue { i1, { ptr, ptr, i64 }, i64 } { i1 false, { ptr, ptr, i64 } poison, i64 poison }, i64 %"31_042", 2
  %60 = insertvalue { i1, { ptr, ptr, i64 }, i64 } %59, { ptr, ptr, i64 } %"29_140", 1
  store { i1, { ptr, ptr, i64 }, i64 } %60, ptr %"046", align 8
  br label %67

61:                                               ; preds = %cond_exit_31
  %62 = add i64 %"10_041", %array_offset45
  call void @__barray_mask_check_not_borrowed(ptr %array_mask_ptr44, i64 %62)
  %63 = getelementptr inbounds i64, ptr %array_ptr43, i64 %62
  %64 = load i64, ptr %63, align 4
  store i64 %"31_042", ptr %63, align 4
  %65 = insertvalue { i1, { ptr, ptr, i64 }, i64 } { i1 true, { ptr, ptr, i64 } poison, i64 poison }, i64 %64, 2
  %66 = insertvalue { i1, { ptr, ptr, i64 }, i64 } %65, { ptr, ptr, i64 } %"29_140", 1
  store { i1, { ptr, ptr, i64 }, i64 } %66, ptr %"046", align 8
  br label %67

67:                                               ; preds = %58, %61
  %"047" = load { i1, { ptr, ptr, i64 }, i64 }, ptr %"046", align 8
  store { i1, { ptr, ptr, i64 }, i64 } %"047", ptr %"41_0", align 8
  %"41_048" = load { i1, { ptr, ptr, i64 }, i64 }, ptr %"41_0", align 8
  %68 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"41_048", 0
  switch i1 %68, label %69 [
    i1 true, label %72
  ]

69:                                               ; preds = %67
  %70 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"41_048", 2
  %71 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"41_048", 1
  store i64 %70, ptr %"053", align 4
  store { ptr, ptr, i64 } %71, ptr %"154", align 8
  br label %cond_42_case_0

72:                                               ; preds = %67
  %73 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"41_048", 2
  %74 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"41_048", 1
  store i64 %73, ptr %"062", align 4
  store { ptr, ptr, i64 } %74, ptr %"163", align 8
  br label %cond_42_case_1

cond_42_case_0:                                   ; preds = %69
  %"055" = load i64, ptr %"053", align 4
  %"156" = load { ptr, ptr, i64 }, ptr %"154", align 8
  store { i32, ptr } { i32 1, ptr @3 }, ptr %"47_0", align 8
  store i64 %"055", ptr %"44_0", align 4
  store { ptr, ptr, i64 } %"156", ptr %"44_1", align 8
  %"47_057" = load { i32, ptr }, ptr %"47_0", align 8
  %"44_058" = load i64, ptr %"44_0", align 4
  %"44_159" = load { ptr, ptr, i64 }, ptr %"44_1", align 8
  %75 = extractvalue { i32, ptr } %"47_057", 0
  %76 = extractvalue { i32, ptr } %"47_057", 1
  %77 = call i32 (ptr, ...) @printf(ptr @prelude.panic_template.3, i32 %75, ptr %76)
  call void @abort()
  store i64 0, ptr %"48_0", align 4
  store { ptr, ptr, i64 } zeroinitializer, ptr %"48_1", align 8
  %"48_060" = load i64, ptr %"48_0", align 4
  %"48_161" = load { ptr, ptr, i64 }, ptr %"48_1", align 8
  store i64 %"48_060", ptr %"049", align 4
  store { ptr, ptr, i64 } %"48_161", ptr %"150", align 8
  br label %cond_exit_42

cond_42_case_1:                                   ; preds = %72
  %"064" = load i64, ptr %"062", align 4
  %"165" = load { ptr, ptr, i64 }, ptr %"163", align 8
  store i64 %"064", ptr %"50_0", align 4
  store { ptr, ptr, i64 } %"165", ptr %"50_1", align 8
  %"50_066" = load i64, ptr %"50_0", align 4
  %"50_167" = load { ptr, ptr, i64 }, ptr %"50_1", align 8
  store i64 %"50_066", ptr %"049", align 4
  store { ptr, ptr, i64 } %"50_167", ptr %"150", align 8
  br label %cond_exit_42

cond_exit_42:                                     ; preds = %cond_42_case_1, %cond_42_case_0
  %"051" = load i64, ptr %"049", align 4
  %"152" = load { ptr, ptr, i64 }, ptr %"150", align 8
  store i64 %"051", ptr %"42_0", align 4
  store { ptr, ptr, i64 } %"152", ptr %"42_1", align 8
  %"42_168" = load { ptr, ptr, i64 }, ptr %"42_1", align 8
  %array_ptr69 = extractvalue { ptr, ptr, i64 } %"42_168", 0
  %array_mask_ptr70 = extractvalue { ptr, ptr, i64 } %"42_168", 1
  %array_offset71 = extractvalue { ptr, ptr, i64 } %"42_168", 2
  %new_offset = add i64 %array_offset71, 1
  call void @__barray_mask_check_not_borrowed(ptr %array_mask_ptr70, i64 %array_offset71)
  %78 = getelementptr inbounds i64, ptr %array_ptr69, i64 %array_offset71
  %79 = load i64, ptr %78, align 4
  %80 = insertvalue { ptr, ptr, i64 } poison, ptr %array_ptr69, 0
  %81 = insertvalue { ptr, ptr, i64 } %80, ptr %array_mask_ptr70, 1
  %82 = insertvalue { ptr, ptr, i64 } %81, i64 %new_offset, 2
  %83 = insertvalue { i1, { ptr, ptr, i64 }, i64 } { i1 true, { ptr, ptr, i64 } poison, i64 poison }, i64 %79, 2
  %84 = insertvalue { i1, { ptr, ptr, i64 }, i64 } %83, { ptr, ptr, i64 } %82, 1
  store { i1, { ptr, ptr, i64 }, i64 } %84, ptr %"52_0", align 8
  %"52_072" = load { i1, { ptr, ptr, i64 }, i64 }, ptr %"52_0", align 8
  %85 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"52_072", 0
  switch i1 %85, label %86 [
    i1 true, label %87
  ]

86:                                               ; preds = %cond_exit_42
  br label %cond_53_case_0

87:                                               ; preds = %cond_exit_42
  %88 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"52_072", 2
  %89 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"52_072", 1
  store i64 %88, ptr %"080", align 4
  store { ptr, ptr, i64 } %89, ptr %"181", align 8
  br label %cond_53_case_1

cond_53_case_0:                                   ; preds = %86
  store { i32, ptr } { i32 1, ptr @4 }, ptr %"58_0", align 8
  %"58_077" = load { i32, ptr }, ptr %"58_0", align 8
  %90 = extractvalue { i32, ptr } %"58_077", 0
  %91 = extractvalue { i32, ptr } %"58_077", 1
  %92 = call i32 (ptr, ...) @printf(ptr @prelude.panic_template.4, i32 %90, ptr %91)
  call void @abort()
  store i64 0, ptr %"59_0", align 4
  store { ptr, ptr, i64 } zeroinitializer, ptr %"59_1", align 8
  %"59_078" = load i64, ptr %"59_0", align 4
  %"59_179" = load { ptr, ptr, i64 }, ptr %"59_1", align 8
  store i64 %"59_078", ptr %"073", align 4
  store { ptr, ptr, i64 } %"59_179", ptr %"174", align 8
  br label %cond_exit_53

cond_53_case_1:                                   ; preds = %87
  %"082" = load i64, ptr %"080", align 4
  %"183" = load { ptr, ptr, i64 }, ptr %"181", align 8
  store i64 %"082", ptr %"61_0", align 4
  store { ptr, ptr, i64 } %"183", ptr %"61_1", align 8
  %"61_084" = load i64, ptr %"61_0", align 4
  %"61_185" = load { ptr, ptr, i64 }, ptr %"61_1", align 8
  store i64 %"61_084", ptr %"073", align 4
  store { ptr, ptr, i64 } %"61_185", ptr %"174", align 8
  br label %cond_exit_53

cond_exit_53:                                     ; preds = %cond_53_case_1, %cond_53_case_0
  %"075" = load i64, ptr %"073", align 4
  %"176" = load { ptr, ptr, i64 }, ptr %"174", align 8
  store i64 %"075", ptr %"53_0", align 4
  store { ptr, ptr, i64 } %"176", ptr %"53_1", align 8
  %"53_186" = load { ptr, ptr, i64 }, ptr %"53_1", align 8
  %array_ptr87 = extractvalue { ptr, ptr, i64 } %"53_186", 0
  %array_mask_ptr88 = extractvalue { ptr, ptr, i64 } %"53_186", 1
  %array_offset89 = extractvalue { ptr, ptr, i64 } %"53_186", 2
  %93 = add i64 %array_offset89, 0
  call void @__barray_mask_check_not_borrowed(ptr %array_mask_ptr88, i64 %93)
  %94 = getelementptr inbounds i64, ptr %array_ptr87, i64 %93
  %95 = load i64, ptr %94, align 4
  %96 = insertvalue { ptr, ptr, i64 } poison, ptr %array_ptr87, 0
  %97 = insertvalue { ptr, ptr, i64 } %96, ptr %array_mask_ptr88, 1
  %98 = insertvalue { ptr, ptr, i64 } %97, i64 %array_offset89, 2
  %99 = insertvalue { i1, { ptr, ptr, i64 }, i64 } { i1 true, { ptr, ptr, i64 } poison, i64 poison }, i64 %95, 2
  %100 = insertvalue { i1, { ptr, ptr, i64 }, i64 } %99, { ptr, ptr, i64 } %98, 1
  store { i1, { ptr, ptr, i64 }, i64 } %100, ptr %"63_0", align 8
  %"63_090" = load { i1, { ptr, ptr, i64 }, i64 }, ptr %"63_0", align 8
  %101 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"63_090", 0
  switch i1 %101, label %102 [
    i1 true, label %103
  ]

102:                                              ; preds = %cond_exit_53
  br label %cond_64_case_0

103:                                              ; preds = %cond_exit_53
  %104 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"63_090", 2
  %105 = extractvalue { i1, { ptr, ptr, i64 }, i64 } %"63_090", 1
  store i64 %104, ptr %"098", align 4
  store { ptr, ptr, i64 } %105, ptr %"199", align 8
  br label %cond_64_case_1

cond_64_case_0:                                   ; preds = %102
  store { i32, ptr } { i32 1, ptr @5 }, ptr %"69_0", align 8
  %"69_095" = load { i32, ptr }, ptr %"69_0", align 8
  %106 = extractvalue { i32, ptr } %"69_095", 0
  %107 = extractvalue { i32, ptr } %"69_095", 1
  %108 = call i32 (ptr, ...) @printf(ptr @prelude.panic_template.5, i32 %106, ptr %107)
  call void @abort()
  store i64 0, ptr %"70_0", align 4
  store { ptr, ptr, i64 } zeroinitializer, ptr %"70_1", align 8
  %"70_096" = load i64, ptr %"70_0", align 4
  %"70_197" = load { ptr, ptr, i64 }, ptr %"70_1", align 8
  store i64 %"70_096", ptr %"091", align 4
  store { ptr, ptr, i64 } %"70_197", ptr %"192", align 8
  br label %cond_exit_64

cond_64_case_1:                                   ; preds = %103
  %"0100" = load i64, ptr %"098", align 4
  %"1101" = load { ptr, ptr, i64 }, ptr %"199", align 8
  store i64 %"0100", ptr %"72_0", align 4
  store { ptr, ptr, i64 } %"1101", ptr %"72_1", align 8
  %"72_0102" = load i64, ptr %"72_0", align 4
  %"72_1103" = load { ptr, ptr, i64 }, ptr %"72_1", align 8
  store i64 %"72_0102", ptr %"091", align 4
  store { ptr, ptr, i64 } %"72_1103", ptr %"192", align 8
  br label %cond_exit_64

cond_exit_64:                                     ; preds = %cond_64_case_1, %cond_64_case_0
  %"093" = load i64, ptr %"091", align 4
  %"194" = load { ptr, ptr, i64 }, ptr %"192", align 8
  store i64 %"093", ptr %"64_0", align 4
  store { ptr, ptr, i64 } %"194", ptr %"64_1", align 8
  %"64_1104" = load { ptr, ptr, i64 }, ptr %"64_1", align 8
  %array_ptr105 = extractvalue { ptr, ptr, i64 } %"64_1104", 0
  %array_mask_ptr106 = extractvalue { ptr, ptr, i64 } %"64_1104", 1
  %array_offset107 = extractvalue { ptr, ptr, i64 } %"64_1104", 2
  call void @free(ptr %array_ptr105)
  call void @free(ptr %array_mask_ptr106)
  ret void
}

declare ptr @malloc(i64)

; Function Attrs: nocallback nofree nounwind willreturn memory(argmem: write)
declare void @llvm.memset.p0.i64(ptr nocapture writeonly, i8, i64, i1 immarg) #0

define internal void @__barray_mask_check_not_borrowed(ptr %0, i64 %1) {
  %3 = udiv i64 %1, 64
  %4 = getelementptr inbounds i64, ptr %0, i64 %3
  %5 = load i64, ptr %4, align 4
  %6 = urem i64 %1, 64
  %7 = lshr i64 %5, %6
  %8 = trunc i64 %7 to i1
  br i1 %8, label %panic, label %ok

panic:                                            ; preds = %2
  %9 = call i32 (ptr, ...) @printf(ptr @prelude.panic_template, i32 2, ptr @0)
  call void @abort()
  unreachable

ok:                                               ; preds = %2
  ret void
}

declare i32 @printf(ptr, ...)

declare void @abort()

declare void @free(ptr)

attributes #0 = { nocallback nofree nounwind willreturn memory(argmem: write) }
